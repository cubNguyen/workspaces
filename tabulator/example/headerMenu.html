<!DOCTYPE html>
<html>
    <head>
        <link href="https://unpkg.com/tabulator-tables@5.5/dist/css/tabulator.min.css" rel="stylesheet" />
        <script type="text/javascript" src="https://unpkg.com/tabulator-tables@5.5/dist/js/tabulator.min.js"></script>
        <!--  -->
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/fontawesome.min.css" />
        <!--  -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.9.2/jquery.contextMenu.min.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.9.2/jquery.contextMenu.min.js"></script>

        <style>
            .header {
                border-radius: 4px;
                margin: 3px;
            }
        </style>
    </head>
    <body>
        <!-- <p>Double-click on Header to show filter</p> -->
        <a href="https://codepen.io/SwatiWakode/pen/wbGpaR"> CodePen | Tabulator - Custom Header and Context Menu </a>
        <br /><br />
        <div id="example-table"></div>
        <br /><br />
        <script>
            var data = [
                { id: 1, name: 'Oli Bob', age: '12', col: 'red', dob: '' },
                { id: 2, name: 'Mary May', age: '1', col: 'blue', dob: '14/05/1982' },
                { id: 3, name: 'Christine Lobowski', age: '42', col: 'green', dob: '22/05/1982' },
                { id: 4, name: 'Brendon Philips', age: '125', col: 'orange', dob: '01/08/1980' },
                { id: 5, name: 'Margret Marmajuke', age: '16', col: 'yellow', dob: '31/01/1999' },
            ];
            var columns = [
                //Define Table Columns
                {
                    title: 'Age',
                    field: 'age',
                    titleFormatter: customHeader,
                },
                {
                    title: 'Names',
                    field: 'name',
                },
            ];
            var table = new Tabulator('#example-table', {
                height: 200,
                layout: 'fitColumns',
                // selectable: true,
                headerSortClickElement: 'icon',
                data: data,
                columns: columns,
            });

            function customHeader(cell, formatterParams, onRendered) {
                return '<i class="fa-solid fa-hashtag"></i><input type="text" class="header"><i data-column="' + cell.getValue() + '" class="fa-solid fa-bars"></i>';
            }
            
            $.contextMenu({
                selector: '.tabulator-headers .fa-bars',
                autoHide: true,
                trigger: 'left',
                itemClickEvent: 'click',
                callback: function (key, options) {
                    alert('Column - ' + options.$trigger.attr('data-column') + ' , Selected - ' + key);
                },
                items: {
                    renameColumn: {
                        name: 'Rename Column',
                    },
                    changeType: {
                        name: 'Change Type',
                        items: {
                            text: { name: 'Text', icon: 'fa-font' },
                            number: { name: 'Number', icon: 'fa-hashtag' },
                            datetime: { name: 'Date/Time', icon: 'fa-calendar' },
                        },
                    },
                    annotations: {
                        name: 'Annotations',
                        items: {
                            dimension: { name: 'Dimension', icon: '' },
                            join: { name: 'Join', icon: '' },
                        },
                    },
                    moveto: {
                        name: 'Move To',
                        items: {
                            first: { name: 'First' },
                            before: { name: 'Before' },
                            after: { name: 'After' },
                            last: { name: 'Last' },
                        },
                    },
                    sep: '----- DataTypes -----',
                    exclude: {
                        name: 'Exclude',
                    },
                },
            });

        </script>
    </body>
</html>
